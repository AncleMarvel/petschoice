{{ "checkout-prefill.css" | asset_url | stylesheet_tag }}

{% comment %} 

This snippet is used to prefill the checkout form with the customer's information in a modal window.

1. Contact information:
    - first name
    - last name
    - email
    - phone number
2. Shipping type:
    - shipping to an post office
    - shipping to an address by courier
3. If shipping to an address by courier (Search with hints and autocomplete):
    - address
    - city
    - postal code (automatically filled in based on the city)
    - country (Ukraine by default)
4. If shipping to an post office (Search with hints and autocomplete):
    - post office number
    - city
    - country (Ukraine by default)

{% endcomment %}

<div class="prefill-overlay hidden" id="prefill-overlay">
    <div class="prefill-container" id="prefill-container">
        <div class="prefill-header">
            <h2>Оформлення замовлення</h2>
            <button class="prefill-close-btn" id="close-prefill-form">
                {% render "icon", icon: "close", class: "prefill-close-btn-icon" %}
            </button>
        </div>
        <div class="prefill-content">
            <form id="prefill-form">
                <!-- Contact Information -->
                <fieldset>
                    <legend>Контактні дані</legend>
                    <label for="first-name">Ім'я</label>
                    <input class="input" type="text" id="first-name" name="firstName" required />

                    <label for="last-name">Прізвище</label>
                    <input class="input" type="text" id="last-name" name="lastName" required />

                    <label for="surname">По-батькові</label>
                    <input class="input" type="text" id="surname" name="surname" required />

                    <label for="email">Електронна адреса</label>
                    <input class="input" type="email" id="email" name="email" required />

                    <label for="phone">Номер телефону</label>
                    <input class="input" type="tel" id="phone" name="phone" placeholder="+380" required />
                </fieldset>

                <!-- Payment Type -->
                <fieldset>
                    <legend>Оплата</legend>
                    <label>
                        <input type="radio" name="payment-type" value="full" checked />
                        Повна предоплата
                    </label>
                    <label>
                        <input type="radio" name="payment-type" value="prepayment" />
                        200 грн предоплата (залишок при отриманні)
                    </label>
                </fieldset>


                <!-- Shipping Type -->
                <fieldset>
                    <legend>Метод доставки</legend>
                    <label>
                        <input type="radio" name="shipping-type" value="post-office" checked />
                        Доставка на відділення Нової Пошти
                    </label>
                    <label>
                        <input type="radio" name="shipping-type" value="courier" />
                        Кур'єрська доставка від Нова Пошта
                    </label>
                </fieldset>

                <!-- Post Office Shipping -->
                <div id="post-office-shipping" class="shipping-details">
                    <fieldset>
                        <label for="settlement-search">Пошук населеного пункту</label>
                        <input class="input" type="text" id="settlement-search" name="settlement-search" autocomplete="off" placeholder="Київ" />
                        
                        <select class="select hidden" name="settlement-selection" id="settlement-selection">
                            <option value="" selected disabled hidden>Оберіть наслений пункт</option>
                            
                        </select>

                        <label for="post-office-number">Пошук відділення</label>
                        <input class="input" type="text" id="search-post-office" name="search-post-office" autocomplete="off" placeholder="Номер відділення" />

                        <select class="select hidden" name="post-office" id="post-office">
                            <option value="" selected disabled hidden>Оберіть відділення</option>
                            
                        </select>
                    </fieldset>
                </div>

                <!-- Address for Courier -->
                <div id="courier-shipping" class="shipping-details hidden">
                    <fieldset>
                        <label for="city">Населений пункт</label>
                        <input class="input" type="text" id="courier-settlement-search" name="courier-settlement-search" autocomplete="off" placeholder="Київ" />
                        <select class="select hidden" name="courier-settlement-selection" id="courier-settlement-selection">
                            <option value="" selected disabled hidden>Оберіть населений пункт</option>
                            
                        </select>
                        

                        {% comment %} 
                            ------------  ПОИСК УЛИЦ ОТКЛЮЧЁН: AddressGeneral.getSettlements returns different city ref than Address.getCities which is required for Address.getStreet

                            <label for="street">Вулиця</label>                        
                            <input class="input" type="text" id="courier-street-search" name="courier-street-search" autocomplete="off" placeholder="Назва вулиці" />
                            <select class="select hidden" name="courier-street-selection" id="courier-street-selection">
                                <option value="" selected disabled hidden>Оберіть вулицю</option>
                                
                            </select> 
                        {% endcomment %}

                        <label for="street">Вулиця</label>
                        <input class="input" type="text" id="street" name="street" autocomplete="street" placeholder="Уточнуйте чи це вул, просп, мкрн тощо" />

                        <label for="street">Дім</label>
                        <input class="input" type="text" id="house" name="house" autocomplete="house" />

                        <label for="street">Квартира</label>
                        <input class="input" type="text" id="flat" name="flat" autocomplete="flat" />

                        <input class="input" type="text" id="postal-code" name="postal-code" value="50055" hidden readonly />
                        <input class="input" type="text" id="country" name="country" value="Ukraine" hidden readonly />
                    </fieldset>
                </div>

                <button type="submit" class="prefill-submit-btn">Продовжити</button>
            </form>
        </div>
    </div>
</div>
